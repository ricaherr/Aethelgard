# ğŸ—ºï¸ AETHELGARD: TECHNICAL NAVIGATION MAP (V 2026.1)

## ğŸ—ï¸ Estructura del Proyecto (DÃ³nde buscar)
- `/core_brain`: LÃ³gica agnÃ³stica (el "Cerebro").
  - `orquestador.py`: Loop principal y latido adaptativo.
  - `scanner.py`: Motor multihilo de obtenciÃ³n de datos.
  - `signal_factory.py`: Orquestador de estrategias (Oliver Velez, etc).
  - `instrument_manager.py`: ClasificaciÃ³n y filtrado de activos (DB-driven).
  - `health.py`: DiagnÃ³stico de hardware y conexiones.
- `/engine`: MÃ³dulos de inteligencia.
  - `tuner.py`: (EdgeTuner) Ajuste de parÃ¡metros dinÃ¡micos.
  - `strategies/`: Clases de estrategias puras (oliver_velez.py).
- `/connectors`: Puentes con el mundo exterior.
  - `bridge_mt5.py`: EjecuciÃ³n de Ã³rdenes y lectura de tickets.
  - `data_providers/`: (Yahoo, MT5, etc) Fallbacks de datos.
  - `encryption.py`: Manejo de Fernet AES-128.
- `/data_vault`: Persistencia y Verdad Ãšnica.
  - `storage.py`: (StorageManager) CRUD de SQLite y gestiÃ³n de colas (Retry/Backoff).
  - `models/`: DefiniciÃ³n de objetos (Signal, Account, Broker).
- `/ui`: Interfaz de usuario.
  - `dashboard.py`: Streamlit multi-pestaÃ±a (Usa width='stretch').

## ğŸ“Š Esquema de Datos CrÃ­tico (Single Source of Truth)
1. **JerarquÃ­a**: `Brokers` (Entidades) -> `Platforms` (Software) -> `Broker_Accounts` (Cuentas).
2. **Seguridad**: Credenciales encriptadas vinculadas a `account_id`.
3. **Resiliencia**: `coherence_events` registra desincronizaciÃ³n entre Orquestador y Broker.

## ğŸš« Reglas de ImplementaciÃ³n (Para la IA)
- **Anti-DuplicaciÃ³n**: Antes de crear un mÃ©todo de DB, revisa `StorageManager`.
- **Agnosticismo**: No importar `MetaTrader5` en `/core_brain`. Todo paso por `/connectors`.
- **Async-First**: Priorizar `asyncio` para el Orquestador y Scanners.
- **UI Standard**: Usar siempre `width='stretch'` en dataframes y grÃ¡ficos.
- **Error Handling**: Usar el sistema de "Mensajes Amigables" de `health.py` para errores de usuario.

## ğŸ“Œ Contexto de SesiÃ³n Actual
- **Modo**: ğŸ§ª Fase 2.9 (Monitor de Coherencia EDGE).
- **Ãšltimo gran cambio**: MigraciÃ³n completa de JSON a DB para Brokers y Cuentas.
## ğŸ’ EstÃ¡ndar de Calidad de CÃ³digo (DefiniciÃ³n de Hecho)
Antes de entregar cualquier cÃ³digo, la IA DEBE validar internamente:
1. **Tipado Estricto**: Uso de 'from typing import ...'. Todas las funciones deben tener Type Hints.
2. **DocumentaciÃ³n**: Docstrings en formato Google para cada clase y funciÃ³n pÃºblica.
3. **Manejo de Errores**: Captura de excepciones especÃ­ficas. Prohibido 'except: pass'.
4. **LÃ³gica AsÃ­ncrona**: VerificaciÃ³n de que no haya bloqueos en el loop principal (uso de await/run_in_executor).
5. **DetecciÃ³n de CÃ³digo Muerto**: Eliminar variables, funciones e imports no utilizados.
6. **ValidaciÃ³n de Sintaxis**: El cÃ³digo debe ser analizado mentalmente por la IA como si pasara por un Linter (Ruff/Flake8).